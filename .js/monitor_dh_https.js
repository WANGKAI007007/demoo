!function(){if("undefined"==typeof window.QIHOO_MONITOR){var t=["360.cn","so.com","leidian.com"],e=function(r,n){var o;!function(){o=!0;try{var t=location.protocol.toLowerCase();"http:"!=t&&"https:"!=t||(o=!1)}catch(t){}}();var i=document,a=navigator,c=r.screen,u=o?"":document.domain.toLowerCase(),s=a.userAgent.toLowerCase(),f={trim:function(t){return t.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")}},d={on:function(t,e,r){t.addEventListener?t&&t.addEventListener(e,r,!1):t&&t.attachEvent("on"+e,r)},parentNode:function(t,e,r){for(r=r||5,e=e.toUpperCase();t&&r-- >0;){if(t.tagName===e)return t;t=t.parentNode}return null}},g={fix:function(t){if(!("target"in t)){var e=t.srcElement||t.target;e&&3==e.nodeType&&(e=e.parentNode),t.target=e}return t}},l=function(){function t(t){return null!=t&&null!=t.constructor?Object.prototype.toString.call(t).slice(8,-1):""}return{isArray:function(e){return"Array"==t(e)},isObject:function(t){return null!==t&&"object"==typeof t},mix:function(t,e,r){for(var n in e)!r&&(t[n]||n in t)||(t[n]=e[n]);return t},encodeURIJson:function(t){var e=[];for(var r in t)null!=t[r]&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.join("&")}}}(),h={get:function(t){try{var e,r=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=i.cookie.match(r))?unescape(e[2]):""}catch(t){return""}},set:function(t,e,r){r=r||{};var n=r.expires;"number"==typeof n&&(n=new Date,n.setTime(n.getTime()+r.expires));try{i.cookie=t+"="+escape(e)+(n?";expires="+n.toGMTString():"")+(r.path?";path="+r.path:"")+(r.domain?"; domain="+r.domain:"")}catch(t){}}},p={getProject:function(){return""},getReferrer:function(){var t=i.referrer||"";return t.indexOf("pass")>-1||t.indexOf("pwd")>-1?"403":t},getBrowser:function(){var t={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(var e in t)if(s.indexOf(t[e])>-1)return e;var n=!1;try{+external.twGetVersion(external.twGetSecurityID(r)).replace(/\./g,"")>1013&&(n=!0)}catch(t){}if(n)return"360se-noua";var o=s.match(/(msie|chrome|safari|firefox|opera|trident)/);return o=o?o[0]:"","msie"==o?o=s.match(/msie[^;]+/)+"":"trident"==o&&s.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/gi,function(t,e){o="msie "+e}),o},getLocation:function(){var t="";try{t=location.href}catch(t){t=i.createElement("a"),t.href="",t=t.href}return t=t.replace(/[?#].*$/,""),t=/\.(s?htm|php)/.test(t)?t:t.replace(/\/$/,"")+"/"},getGuid:function(){function e(t){var e=0,r=0,n=t.length-1;for(n;n>=0;n--){var o=parseInt(t.charCodeAt(n),10);e=(e<<6&268435455)+o+(o<<14),0!=(r=266338304&e)&&(e^=r>>21)}return e}var n="__guid",s=h.get(n);if(!s){s=[e(o?"":i.domain),function(){for(var t=[a.appName,a.version,a.language||a.browserLanguage,a.platform,a.userAgent,c.width,"x",c.height,c.colorDepth,i.referrer].join(""),n=t.length,o=r.history.length;o;)t+=o--^n++;return 2147483647*(Math.round(2147483647*Math.random())^e(t))}(),+new Date+Math.random()+Math.random()].join(".");var f={expires:2592e7,path:"/"};if(t.length)for(var d=0;d<t.length;d++){var g=t[d],l="."+g;if(u.indexOf(l)>0&&u.lastIndexOf(l)==u.length-l.length||u==g){f.domain=l;break}}h.set(n,s,f)}return function(){return s}}(),getCount:function(){var t="monitor_count",e=h.get(t);return e=(parseInt(e)||0)+1,h.set(t,e,{expires:864e5,path:"/"}),function(){return e}}(),getFlashVer:function(){var t=-1;if(a.plugins&&a.mimeTypes.length){var e=a.plugins["Shockwave Flash"];e&&e.description&&(t=e.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s)+r/,".")+".0")}else if(r.ActiveXObject&&!r.opera)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n){var o=n.GetVariable("$version");t=o.replace(/WIN/g,"").replace(/,/g,".")}}catch(t){}return t=parseInt(t,10)},getContainerId:function(t){var e,r;for(v.areaIds&&(e=new RegExp("^("+v.areaIds.join("|")+")$","ig"));t;){if(t.attributes&&("bk"in t.attributes||"data-bk"in t.attributes)){if(r=t.getAttribute("bk")||t.getAttribute("data-bk"))return r="bk:"+r,r.substr(0,100);if(t.id)return r=t.getAttribute("data-desc")||t.id,r.substr(0,100)}else if(e&&t.id&&e.test(t.id))return r=t.getAttribute("data-desc")||t.id,r.substr(0,100);t=t.parentNode}return""},getText:function(t){var e="";return e="input"==t.tagName.toLowerCase()?t.getAttribute("text")||t.getAttribute("data-text")||t.value||t.title||"":t.getAttribute("text")||t.getAttribute("data-text")||t.innerText||t.textContent||t.title||"",f.trim(e).substr(0,100)},getHref:function(t){try{return t.getAttribute("data-href")||t.href||""}catch(t){return""}}},m={getBase:function(){return{p:p.getProject(),u:p.getLocation(),id:p.getGuid(),guid:p.getGuid()}},getTrack:function(){return{b:p.getBrowser(),c:p.getCount(),r:p.getReferrer(),fl:p.getFlashVer()}},getClick:function(t){t=g.fix(t||event);var e=t.target,r=e.tagName,n=p.getContainerId(e);if(!e.type||"submit"!=e.type&&"button"!=e.type){if("AREA"==r)return{f:p.getHref(e),c:"area:"+e.parentNode.name,cId:n};var o,i;return"IMG"==r&&(o=e),!!(e=d.parentNode(e,"A"))&&(i=p.getText(e),{f:p.getHref(e),c:i||(o?o.src.match(/[^\/]+$/):""),cId:n})}var a=d.parentNode(e,"FORM"),c={};if(a){var u=a.id||"",s=e.id;if(c={f:a.action,c:"form:"+(a.name||u),cId:n},!("search-form"!=u&&"searchForm"!=u||"searchBtn"!=s&&"search-btn"!=s)){var f=w("kw")||w("search-kw")||w("kw1");c.w=f?f.value:""}}else c={f:p.getHref(e),c:p.getText(e),cId:n};return c},getKeydown:function(t){if(t=g.fix(t||event),13!=t.keyCode)return!1;var e=t.target,r=e.tagName,n=p.getContainerId(e);if("INPUT"==r){var o=d.parentNode(e,"FORM");if(o){var i=o.id||"",a=e.id,c={f:o.action,c:"form:"+(o.name||i),cId:n};return"kw"!=a&&"search-kw"!=a&&"kw1"!=a||(c.w=e.value),c}}return!1}},v={trackUrl:null,clickUrl:null,areaIds:null},w=function(t){return document.getElementById(t)};return{version:"v1.3.2 (2014.11.21)",util:p,data:m,config:v,sendLog:function(){return r.__qihoo_monitor_imgs={},function(t){var e="log_"+ +new Date,n=r.__qihoo_monitor_imgs[e]=new Image;n.onload=n.onerror=function(){r.__qihoo_monitor_imgs&&r.__qihoo_monitor_imgs[e]&&(r.__qihoo_monitor_imgs[e]=null,delete r.__qihoo_monitor_imgs[e])},n.src=t}}(),buildLog:function(){var t="";return function(e,r){if(!1!==e){e=e||{};var n=m.getBase();e=l.mix(n,e,!0);var o=r+l.encodeURIJson(e);if(o!=t){t=o,setTimeout(function(){t=""},100);var i=l.encodeURIJson(e);i+="&t="+ +new Date,r=r.indexOf("?")>-1?r+"&"+i:r+"?"+i,this.sendLog(r)}}}}(),log:function(t,e){e=e||"click";var r=v[e+"Url"];r||alert("Error : the "+e+"url does not exist!"),this.buildLog(t,r)},setConf:function(t,e){var r={};return l.isObject(t)?r=t:r[t]=e,this.config=l.mix(this.config,r,!0),this},setUrl:function(t){return t&&(this.util.getLocation=function(){return t}),this},setProject:function(t){return t&&(this.util.getProject=function(){return t}),this},setId:function(){for(var t,e=[],r=0;t=arguments[r++];)l.isArray(t)?e=e.concat(t):e.push(t);return this.setConf("areaIds",e),this},getTrack:function(){var t=this.data.getTrack();return this.log(t,"track"),this},getClickAndKeydown:function(){var t=this;return d.on(i,"mousedown",function(e){var r=t.data.getClick(e);t.log(r,"click")}),d.on(i,"keydown",function(e){var r=t.data.getKeydown(e);t.log(r,"click")}),e.getClickAndKeydown=function(){return t},this}}}(window);e.setConf({trackUrl:"https://s.360.cn/haostat/haopv.gif",clickUrl:"https://s.360.cn/haostat/haoclk.gif",wpoUrl:"https://s.360.cn/hao360/peform.html"}),window.QIHOO_MONITOR=e,"undefined"==typeof window.monitor&&(window.monitor=e)}}();